/*! Premise-Wp 2015-11-07 */
var PremiseAjax={overlay:'<div id="premise-ajax-overlay" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#FFFFFF;opacity:.6;z-index:9990;"></div>',icon:'<div id="premise-ajax-loading" class="absolute center" style="display:none;position:fixed;width:60px;top:40%;left:50%;margin-left:-30px;z-index:9991;"><i class="fa fa-3x fa-spinner fa-spin"></i></div>',dialog:'<div id="premise-ajax-dialog" style="display:none;position:fixed;top:10%;left:10%;width:80%;height:80%;background-color:#FFFFFF;z-index:9992;overflow:auto;box-shadow: 0 0 5px #333333;-webkit-box-shadow: 0 0 5px #333333;-moz-box-shadow: 0 0 5px #333333;-ms-box-shadow: 0 0 5px #333333;-o-box-shadow: 0 0 5px #333333;padding:20px;" class="round-corners25"></div>',control:'<a id="premise-ajax-close" style="display:none;position: fixed;padding: 2px 12px;top: 60px;right: 40px;background: #FFFFFF;z-index: 9995;line-height: 150%;font-size: 20px;color: #AAAAAA;border-radius: 24px;-webkit-border-radius: 24px;-moz-border-radius: 24px;-ms-border-radius: 24px;-o-border-radius: 24px;box-shadow: 0 0 5px #333333;-webkit-box-shadow: 0 0 5px #333333;-moz-box-shadow: 0 0 5px #333333;-ms-box-shadow: 0 0 5px #333333;-o-box-shadow: 0 0 5px #333333;" class="row" href="javascript:;" onclick="premiseAjaxClose();">x</a>',ajaxExists:false,init:function(){this.ajaxExists=jQuery("#premise-ajax-overlay").length>0?true:false;this.bindEvents()},bindEvents:function(){jQuery(document).on("premiseAjaxOpenDialog",this.insertMarkup)},insertMarkup:function(){var a=PremiseAjax;jQuery("body").append(a.overlay);jQuery("body").append(a.icon);jQuery("body").append(a.dialog);jQuery("body").append(a.control);a.overlay=jQuery("#premise-ajax-overlay");a.icon=jQuery("#premise-ajax-loading");a.dialog=jQuery("#premise-ajax-dialog");a.close=jQuery("#premise-ajax-close")},openDialog:function(){var a=PremiseAjax;if(!a.ajaxExists){a.insertMarkup()}var b="#";jQuery(a.overlay).fadeIn("fast");jQuery(a.icon).fadeIn("fast");jQuery(a.close).fadeIn("fast");jQuery(a.dialog).load(b,function(b){jQuery(a.dialog).fadeIn("fast");jQuery(a.icon).fadeOut("fast")})},premiseAjaxClose:function(){var a=PremiseAjax;return false}};var PremiseField={faShowIconsBtn:null,faHideIconsBtn:null,init:function(){this.faShowIconsBtn=jQuery(".premise-field-fa_icon .premise-choose-icon");this.faHideIconsBtn=jQuery(".premise-field-fa_icon .premise-remove-icon");this.bindEvents();jQuery(document).trigger("premiseFieldAfterInit",this)},bindEvents:function(){this.faShowIconsBtn.click(this.showIcons);this.faHideIconsBtn.click(function(){jQuery(this).parents(".premise-field").find("input.premise-fa_icon").val("");PremiseField.hideIcons})},showIcons:function(){var a=PremiseField.faShowIconsBtn.parents(".premise-field");var b=a.find(".premise-field-fa-icons-container");jQuery(b).show("fast");jQuery(document).trigger("premiseFieldAfterFaIconsOpen",b,a);jQuery(document).on("click",".premise-field-fa-icon-anchor",PremiseField.insertIcon);jQuery(document).on("click","body",PremiseField.hideIcons);return false},hideIcons:function(){var a=PremiseField.faHideIconsBtn.parents(".premise-field");var b=a.find(".premise-field-fa-icons-container");jQuery(b).hide("fast");jQuery(document).trigger("premiseFieldAfterFaIconsClose",b,a);PremiseField.bindEvents();return false},insertIcon:function(){var a=jQuery(this).attr("data-icon");jQuery(this).parents(".premise-field").find("input.premise-fa_icon").val(a);jQuery("body").trigger("click")}};PremiseField.WPMedia={uploader:null,isMulti:false,mediaUploaded:[],mediaSaved:[],init:function(a){this.mediaField=jQuery(a).parent(".premise-field-wp_media").find("input.premise-file-url");this.isMulti=this.mediaField.attr("multiple")?true:false;this.bindEvents();this.upload()},bindEvents:function(){},upload:function(){PremiseField.WPMedia.mediaUploaded=[];if(PremiseField.WPMedia.uploader){PremiseField.WPMedia.uploader.open();return}PremiseField.WPMedia.uploader=wp.media.frames.file_frame=wp.media({title:"Upload Media",button:{text:"Insert Media"},multiple:PremiseField.WPMedia.isMulti});PremiseField.WPMedia.onInsert();PremiseField.WPMedia.uploader.open()},onInsert:function(){PremiseField.WPMedia.uploader.on("select",function(){attachment=PremiseField.WPMedia.uploader.state().get("selection").toJSON();jQuery(attachment).each(function(a,b){PremiseField.WPMedia.mediaUploaded.push(attachment[a].url)});PremiseField.WPMedia.handleFiles()})},handleFiles:function(){var a=PremiseField.WPMedia;console.log(a.mediaUploaded);a.mediaField.val(a.mediaUploaded)},updateMediaThumbs:function(){var a=jQuery(".spt-upload-stats-here");for(var b=0;b<PremiseField.WPMedia.mediaUploaded.length;b++){var c=document.createElement("div");c.setAttribute("class","spt-stat-item");c.style.backgroundImage="url("+PremiseField.WPMedia.mediaUploaded[b]+")";c.innerHTML='<a href="javascript:;" class="spt-stat-item-delete"><i class="fa fa-close"></i></a>'+'<input type="hidden" class="spt-hidden-field" name="spt_options[stats][]" value="'+PremiseField.WPMedia.mediaUploaded[b]+'">';a.append(c)}},removeFile:function(a){jQuery(a).parent(".premise-field-wp_media").find(".premise-file-url").val("");return false}};jQuery(function(a){PremiseField.init();PremiseAjax.init()});function premiseSameHeight(a){a=a||".premise-same-height";var b=0,c;var d=jQuery(a).each(function(){if(c){return false}c=jQuery(this).attr("data-height");if(c){b=c;return false}var a=jQuery(this).outerHeight();if(a>b){b=a}});var e=jQuery(a).css("min-height",b);jQuery.when(d).done(e);return false}